# üíñ My Love Backend

–†–æ–º–∞–Ω—Ç–∏—á–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ-–ø–æ–¥–∞—Ä–æ–∫ –Ω–∞ 14 —Ñ–µ–≤—Ä–∞–ª—è –æ—Ç –õ—ë—à–∏ –¥–ª—è –°–≤–µ—Ç—ã.

[![FastAPI](https://img.shields.io/badge/FastAPI-005571?style=for-the-badge&logo=fastapi)](https://fastapi.tiangolo.com/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-316192?style=for-the-badge&logo=postgresql&logoColor=white)](https://www.postgresql.org/)
[![Redis](https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white)](https://redis.io/)
[![Docker](https://img.shields.io/badge/Docker-2CA5E0?style=for-the-badge&logo=docker&logoColor=white)](https://www.docker.com/)

> –õ–∏—á–Ω—ã–π —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å–∞–¥ –Ω–∞—à–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π ‚Äî –º–µ—Å—Ç–æ –¥–ª—è –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π, –º–µ—á—Ç–∞–Ω–∏–π –∏ –º–∞–ª–µ–Ω—å–∫–∏—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤–¥–≤–æ—ë–º.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### üì∏ **–ò–Ω—Ç–∏–º–Ω—ã–π –º–µ–¥–∏–∞-–∞—Ä—Ö–∏–≤**
- –ó–∞–≥—Ä—É–∂–∞–π —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ –≤–∞–∂–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–∞–º –∏ —Å–æ–±—ã—Ç–∏—è–º
- –ü—Ä–∏–≤–∞—Ç–Ω–æ–µ –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ (–¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –Ω–∞–º –¥–≤–æ–∏–º)

### üíå **–¢–∞–π–Ω—ã–µ –∑–∞–ø–∏—Å–∫–∏**
- –í–∏—à–ª–∏—Å—Ç—ã –ø–æ–¥–∞—Ä–∫–æ–≤ (—á—Ç–æ–±—ã –Ω–µ –≥–∞–¥–∞—Ç—å)
- –°–ø–∏—Å–æ–∫ "–ö–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –≤–º–µ—Å—Ç–µ" (–º–µ—á—Ç—ã –∏ –ø–ª–∞–Ω—ã)
- –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ –∏ —Ç–µ–ø–ª—ã–µ —Å–ª–æ–≤–∞ –¥—Ä—É–≥ –¥—Ä—É–≥—É
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ –∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º

### üéÆ **–ú–∏–Ω–∏-–∏–≥—Ä—ã –¥–ª—è –ø–∞—Ä—ã**
- –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ "–ö–∞–∫ —Ö–æ—Ä–æ—à–æ –º—ã –∑–Ω–∞–µ–º –¥—Ä—É–≥ –¥—Ä—É–≥–∞?"
- –ü–∞—Ä–Ω—ã–µ –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏
- –ò–≥—Ä–∞ –≤ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π

### üîí **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å**
- –¢–æ–ª—å–∫–æ –¥–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ
- End-to-end —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–≤ –ø–ª–∞–Ω–∞—Ö)
- –§–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º –±–∞–∫–µ—Ç–µ
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ JSON Web Token (JWT)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker –∏ Docker Compose
- Python 3.13+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### –ó–∞–ø—É—Å–∫ –≤ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/alex6712/my-love-backend.git
cd my-love-backend

# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è AES-256
openssl genrsa -aes256 -passout pass:{password} -out keys/private_key.pem.enc 2048
openssl rsa -in private_key.pem.enc -pubout -out keys/public_key.pem

# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –µ–≥–æ
cp .env.example .env

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose --env-file .env up -d --wait

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
docker compose exec my_love_backend alembic upgrade head
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
- Backend API: http://localhost:8000
- PostgreSQL: http://localhost:5432
- Redis: http://localhost:6379
- MinIO Console: http://localhost:9001

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/alex6712/my-love-backend.git
cd my-love-backend

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

# —á–µ—Ä–µ–∑ pip...
pip install -r requirements-dev.txt
# –∏–ª–∏ —Å –ø–æ–º–æ—â—å—é uv
uv sync --group dev

# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è AES-256
openssl genrsa -aes256 -passout pass:{password} -out keys/private_key.pem.enc 2048
openssl rsa -in private_key.pem.enc -pubout -out keys/public_key.pem

# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –µ–≥–æ
cp .env.example .env

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–≤–æ–∏ —Å–µ—Ä–≤–∏—Å—ã PostgreSQL, Redis –∏ MinIO –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≥–æ—Ç–æ–≤—ã–µ —á–µ—Ä–µ–∑ Docker
docker compose --env-file .env up my_love_database my_love_redis my_love_minio -d --wait

# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source ./.venv/scripts/activate
# –∏–ª–∏ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã —Å –ø–æ–º–æ—â—å—é
uv run [COMMAND]

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
alembic upgrade head

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
fastapi dev ./app/main.py
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
my-love-backend/            # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ .github/workflows/      # CI/CD workflow
‚îú‚îÄ‚îÄ alembic/                # Alembic –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/                # –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ v1/
‚îÇ   ‚îú‚îÄ‚îÄ core/               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dependencies/   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è DI
‚îÇ   ‚îú‚îÄ‚îÄ infrastructure/     # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∫–ª–∞—Å—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ models/             # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ repositories/       # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ schemas/            # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dto/            # –°—Ö–µ–º—ã DTO
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ v1/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ requests/   # –°—Ö–µ–º—ã –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ responses/  # –°—Ö–µ–º—ã –æ—Ç–≤–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ services/           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ tests/              # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ keys/                   # –ö–ª—é—á–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–æ–¥–ø–∏—Å–∏
‚îú‚îÄ‚îÄ scripts/                # Utility-—Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ .env                    # –ó–Ω–∞—á–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ pyproject.toml          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (uv)
‚îî‚îÄ‚îÄ docker-compose.yml      # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã:
- **Swagger UI**: `http://localhost:8000/docs`
- **ReDoc**: `http://localhost:8000/redoc`

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| GET | `/v1/` | Healthcheck |
| GET | `/v1/app_info` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ |
| POST | `/v1/auth/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è |
| POST | `/v1/auth/login` | –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É |
| GET | `/v1/auth/refresh` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ |
| POST | `/v1/auth/logout` | –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã |
| POST | `/v1/users/couple` | –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—ã |
| GET | `/v1/users/partner` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ä—Ç–Ω—ë—Ä–µ |
| GET | `/v1/media/albums` | –°–ø–∏—Å–æ–∫ –∞–ª—å–±–æ–º–æ–≤ |
| POST | `/v1/media/albums` | –°–æ–∑–¥–∞–Ω–∏–µ –∞–ª—å–±–æ–º–∞ |

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
uv run pytest ./app/tests/

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
uv run pytest --cov=app ./app/tests/
```

## üì¶ –î–µ–ø–ª–æ–π

### –ù–∞ VPS (–Ω–∞–ø—Ä–∏–º–µ—Ä, Ubuntu + Nginx)

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä
rsync -az --delete ./ {ssh_user}@{ssh_host}:~/my-love-backend

# 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ Docker Compose
docker compose --env-file .env up -d --wait

# 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx –∫–∞–∫ reverse proxy
# 5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL —á–µ—Ä–µ–∑ Let's Encrypt
```

## üå± –ü–ª–∞–Ω—ã –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é

- –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (React Native)
- Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –¥–∞—Ç–∞—Ö)
- End-to-end —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫
- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä "–∏—Å—Ç–æ—Ä–∏–∏ –ª—é–±–≤–∏" –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º (–ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Å–æ–±—ã—Ç–∏—è)
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (PDF-–∫–Ω–∏–≥–∞ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π)

## üíù –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–∞—Ä—ã

–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ —Å –º—ã—Å–ª—å—é –æ —Ç–æ–º, —á—Ç–æ —Ü–∏—Ñ—Ä–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–∞–∫–∏–º –∂–µ —Ç—ë–ø–ª—ã–º –∏ –ª–∏—á–Ω—ã–º, –∫–∞–∫ –±—É–º–∞–∂–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫. –ó–¥–µ—Å—å –Ω–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤, –Ω–µ—Ç —Ä–µ–∫–ª–∞–º—ã, –Ω–µ—Ç —Å–ª–µ–∂–∫–∏ ‚Äî —Ç–æ–ª—å–∫–æ –≤—ã –∏ –≤–∞—à–∏ —ç–º–æ—Ü–∏–∏.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ MIT License ‚Äî —Å–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

> _–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –æ–¥–Ω–æ–π –æ—Å–æ–±–µ–Ω–Ω–æ–π –ø–∞—Ä—ã.  
> –ö–æ–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–∏–¥–µ–∞–ª—å–Ω—ã–º, –Ω–æ —á—É–≤—Å—Ç–≤–∞ ‚Äî –Ω–∞—Å—Ç–æ—è—â–∏–µ._
